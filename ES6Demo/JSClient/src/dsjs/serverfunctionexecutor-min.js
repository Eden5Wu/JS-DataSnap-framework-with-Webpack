function getAuth(t,e,n){return isReferenceAFunction(convertStringToBase64)?{authentication:convertStringToBase64(t+":"+e)}:(!0===n&&alert("convertStringToBase64 was not found."),null)}function ServerFunctionExecutor(t,e,a){this.connectionInfo=e,this.host=getConnectionHost(e),this.port=getConnectionPort(e),this.dsContext=getDSContext(e),this.restContext=getRestContext(e),this.cacheContext=getCacheContext(e),this.isHttpS=getIsHTTPS(e),this.className=t,this.authentication=null==e||null==e.authentication?null:e.authentication,this.owner=a,this.getCacheURL=function(t,e){if(null!=t&&isArray(t))return null;null==e&&(e=!1);var n=this.getURLPrefix(!1)+this.cacheContext,i=!1;null!=t&&(0==(t+="").indexOf("/")&&(t=t.substring(1)),0==t.indexOf("cache/")&&(t=t.substring(6)),n+=t,i=-1<t.indexOf("?"));var s=getSessionID();return e&&null!=s&&(n+=i?"&":"?",n+="sid="+encodeURIComponent(s)),n},this.getURLPrefix=function(t){null==t&&(t=!0);var e="";null!=this.connectionInfo&&null!=this.connectionInfo.pathPrefix&&""!=this.connectionInfo.pathPrefix&&(e="/"+this.connectionInfo.pathPrefix);var n=isValidPort(this.port)?":"+this.port:"",i="/"+this.dsContext;return t&&(i+=this.restContext),(this.isHttpS?"https://":"http://")+encodeURIComponent(this.host)+n+e+i},this.getMethodURL=function(t,e,n,i){if(null==t)return null;e=validateRequestType(e);isValidPort(this.port)&&this.port,this.dsContext,this.restContext;var s=this.getURLPrefix()+encodeURIComponent(this.className)+"/"+encodeURIComponent(t)+"/",o=new Array,r=null;if(isArray(n)){var l=n.length;for(x=0;x<l;x++){var u=n[x];0<o.length||(isArray(u)||isObject(u))&&"GET"!=e&&"DELETE"!=e?o[o.length]=u:s+=encodeURIComponent(u)+"/"}}else"GET"==e||"DELETE"==e?s+=encodeURIComponent(n)+"/":o[0]=n;if(0<o.length&&(r=1==o.length?o[0]:{_parameters:o}),null!=i){var a=!1;for(var c in i)if(i.hasOwnProperty(c)){var h=a?"&":"?";a=!0;var f=i[c];s+=h+encodeURIComponent(c),null!=f&&(s+="="+encodeURIComponent(f))}}return[s,r]},this.executeMethodURL=function(t,e,n,i,s,o){null==s&&(s=!0),n=validateRequestType(n);var r=getXmlHttpObject();r.withCredentials=!0;var l=null!=i;r.open(n,t,l),l&&(r.onreadystatechange=function(){4==r.readyState&&(JSONResult=s?parseHTTPResponse(r):null,i(JSONResult,r.status,a))}),null!=e&&(e=JSON.stringify(e)),r.setRequestHeader("Accept",null==o?"application/json":o),r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.setRequestHeader("If-Modified-Since","Mon, 1 Oct 1990 05:00:00 GMT");var u=getSessionID();if(null!=u&&r.setRequestHeader("Pragma","dssession="+u),null!=this.authentication&&r.setRequestHeader("Authorization","Basic "+this.authentication),r.send(e),s&&!l)return parseHTTPResponse(r)},this.executeMethod=function(t,e,n,i,s,o,r){var l=this.getMethodURL(t,e,n,o);return this.executeMethodURL(l[0],l[1],e,i,s,r)},this.closeSession=function(){if(null==getSessionID())return!1;var t=this.getURLPrefix()+"CloseSession/",e=this.executeMethodURL(t,null,"GET",null,!0,null);return setSessionData(null,null),e}}function getConnectionHost(t){if(null!=t&&null!=t.host&&""!=t.host)return t.host;var e="localhost",n=location.host;"localhost"!=n&&(e=-1<n.indexOf(":")?n.split(":",2)[0]:n);return e}function getConnectionPort(t){if(null!=t&&null!=t.port&&""!=t.port)return t.port;var e=null,n=location.host;"localhost"!=n&&-1<n.indexOf(":")&&(e=n.split(":",2)[1]);return e}function getIsHTTPS(t){return null!=t&&null!=t.https&&""!=t.https?!0===t.https:"https:"==location.protocol}function getDSContext(t){if(null!=t&&null!=t.dscontext){var e=trimString(t.dscontext);return""==e?"":e+"/"}return"datasnap/"}function getRestContext(t){if(null!=t&&null!=t.restcontext){var e=trimString(t.restcontext);return""==e?"":e+"/"}return"rest/"}function getCacheContext(t){if(null!=t&&null!=t.cachecontext){var e=trimString(t.cachecontext);return""==e?"cache/":e+"/"}return"cache/"}function validateRequestType(t){return null==t?t="GET":"GET"!=(t=t.toUpperCase())&&"POST"!=t&&"PUT"!=t&&"DELETE"!=t&&(t="GET"),t}function parseSessionID(t){if(null!=t){var e=t.getResponseHeader("Pragma");if(null!=e){var n="dssessionexpires=",i=e.indexOf("dssession=");if(-1<i){var s=e.indexOf(",",i);s=s<0?e.length:s,i+="dssession=".length;var o=e.substr(i,s-i),r=null,l=e.indexOf(n);if(-1<l){s=(s=e.indexOf(",",l))<0?e.length:s,l+=n.length;var u=parseInt(e.substr(l,s-l));0!=u&&NaN!=u&&(r=new Date).setMilliseconds(r.getMilliseconds()+u)}setSessionData(o,r)}}}}function parseHTTPResponse(t){if(parseSessionID(t),null!=t&&null!=t.responseText){var e=t.responseText;if(0<e.length){var n=null;try{n=JSON.parse(e)}catch(t){n=e}return 403==t.status&&null!=n&&null!=n.SessionExpired&&setSessionData(null,null),n}}return null}function isString(t){return null!=t&&"string"==typeof t}function isArray(t){return!(null==t||-1==t.constructor.toString().indexOf("Array"))}function isObject(t){return!(null==t||-1==t.constructor.toString().indexOf("Object()"))}function isValidPort(t){if(null==t)return!1;if("number"==typeof t)return null!==t&&isFinite(t);if("string"==typeof t&&0<t.length){var e;for(i=0;i<t.length;i++)if(e=t.charAt(i),-1=="0123456789".indexOf(e))return!1;return!0}return!1}function getXmlHttpObject(){return"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("This browser does not support XMLHttpRequest.")}}),new XMLHttpRequest}function getSessionID(){var t=null;if(null!=$$SessionID$$&&(t=$$SessionID$$,null!=$$SessionExpires$$&&new Date>=$$SessionExpires$$)){t=null;var e=$$SessionID$$;$$SessionID$$=null,$$SessionExpires$$=null,isReferenceAFunction(notifySessionExpired)&&notifySessionExpired(e)}return t}function getSessionCookieId(){return $$SESSION_COOKIE_PREFIX$$+"dssessionid"}function initSessionData(t,e){$$SessionID$$=null,$$SessionExpires$$=null,$$SESSION_COOKIE_PREFIX$$="",isString(e)&&($$SESSION_COOKIE_PREFIX$$=e),null!=t&&($$USE_SESSION_COOKIE$$=!0===t),!0===$$USE_SESSION_COOKIE$$&&navigator.cookieEnabled&&($$SessionID$$=getCookie(getSessionCookieId()))}function setSessionData(t,e){$$SessionID$$=t,$$SessionExpires$$=e,!0===$$USE_SESSION_COOKIE$$&&navigator.cookieEnabled&&(null!=t?setCookie(getSessionCookieId(),t,e):deleteCookie(getSessionCookieId()))}function getCookie(t){var e=null;if(null!=t&&0<document.cookie.length)for(var n=document.cookie.split(";"),i=0;i<n.length;i++){var s=n[i].split("=");t==s[0].replace(/^\s+|\s+$/g,"")&&(e=1<s.length?unescape(s[1].replace(/^\s+|\s+$/g,"")):"")}return e}function setCookie(t,e,n){if(null!=t&&null!=e&&0<t.length&&0<e.length){var i=t+"="+escape(e);null!=n&&(i+="; expires="+n.toGMTString()),document.cookie=i+"; path=/"}}function deleteCookie(t){setCookie(t,"deleted",new Date(1e3))}function trimString(t){return isString(t)?t.replace(/^\s+|\s+$/,""):t}function arrayIndexOf(t,e){if(null!=t)for(var n=t.length,i=0;i<n;i++)if(t[i]===e)return i;return-1}function arrayToCSV(t){return isArray(t)?t.join(","):t}function nullOrEmptyStr(t){return null==t||""==t}function isReferenceAFunction(t){return null!=t&&"function"==typeof t}$$USE_SESSION_COOKIE$$=!1,$$SESSION_COOKIE_PREFIX$$="",initSessionData(!1);